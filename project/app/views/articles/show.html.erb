<%= render 'main/header' %>
<div class = "container">
  <div class = "card">
    <div class="card-body">
      <h1 class="card-title"><strong><%= @article.title %></strong></h1>
      <h6 class="card-subtitle mb-2 text-muted">
        by <%= @article.author %>
        <br>
        Posted on <strong><%= @article.created_at.in_time_zone('Pacific Time (US & Canada)').strftime("%B %d %Y %H:%M") %></strong>
        <% if @article.created_at != @article.updated_at %>
          <br>
          Updated on <strong><%= @article.updated_at.in_time_zone('Pacific Time (US & Canada)').strftime("%B %d %Y %H:%M") %></strong>
          <br>
        <% end %>
        <% if current_user && (current_user.username == @article.author || current_user.is_admin) %>
          <%= link_to 'Edit', edit_article_path(@article) %> /
          <%= link_to 'Delete', article_path(@article), method: :delete, data: { confirm: 'You are about to delete this post. Are you sure?' } %><br>
        <% end %>
      </h6>
      <p class= "card-text">  <%= @article.text %> </p>
      <p>
        <%= button_to 'Like', article_likes_path(@article), method: :post,  remote: true, form: {style: 'display:inline-block;'}%> <%= @article.likes.count %>
      </p>
      <p>
        <%= button_to 'Dislike', article_dislikes_path(@article), method: :post, remote: true, form: {style: 'display:inline-block;'}%> <%= @article.dislikes.count %>
      </p>

    </div>

    <%= link_to 'Back', root_path %>
  </div>
  <h2>Comments</h2>
  <%= render 'comments/form' %>
  <%= render @article.comments.select(&:persisted?) %>
</div>
